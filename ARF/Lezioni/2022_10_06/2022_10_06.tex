\section{Lecture 06/10/2022}
Let \(f \not \in R(I)\). Is it true that \(\exists \; g \in R(I)\) s.t. \(g = f\) a.e. on \(I\)? No.

For instance, consider \(T_{\mathcal{E}}\), the generalized Cantor set (\(\lambda(T_{\mathcal{E}}) = 0\)) and then consider \(\chi_{T_{\mathcal{E}}}\). \\
In general, \(\chi_{A}\) is discontinuous on \(\delta A\).  But \(T_{\mathcal{E}}\) has no interior parts \(\Rightarrow T_{\mathcal{E}} = \delta T_{\mathcal{E}}\) \(\Rightarrow \chi_{T_{\mathcal{E}}}\) is discontinuous on \(T_{\mathcal{E}}\), which has positive measure
\(\Rightarrow \) by the last theorem, \(\chi_{T_\epsilon}\) is not \(R(I)\)

Clearly 
\[
    \int_{[0,1]} \chi_{T_{\mathcal{E}}} d\lambda = \lambda(T_{\mathcal{E}})
\]
so \(\chi_{T_{\mathcal{E}}} \in \mathcal{L}^1([0,1])\).  

If \(g = \chi_{T_{\mathcal{E}}}\) a.e., then \(g\) is discontinuous at almost every part of \(T_{\mathcal{E}} \Rightarrow\) \(g\) is discontinuous on a set of positive measure \(\Rightarrow g \not \in R(I)\). 
So, the Lebesgue integral is a true extension of the Riemann one.

Regarding generalized integrals we have

\begin{theorem}
    \(-\infty \leq a < b \leq +\infty, \quad f \in R^g([a,b])\) where 
    \[
        R^g([a,b]) = \left\lbrace \mbox{Riemann-int functions on }[a,b]\mbox{ in the generalized sense} \right\rbrace
    \]
    Then, \(f\) is \(([a,b], \mathcal{L}([a,b]))\)-measurable. Moreover
    \begin{enumerate}
        \item \(f \geq 0\) on \([a,b] \Rightarrow f \in \mathcal{L}^1([a,b])\)
        \item \(\vert f \vert \in R^g([a,b]) \Rightarrow f \in \mathcal{L}^1 ([a,b])\)
    \end{enumerate}
    and in both cases
    \[
        \int_{[a,b]} fd\lambda = \int_a^b f(x)dx
    \]
    If \(f\) is in \(R^g([a,b])\), but \(\vert f\vert \not \in R^g([a,b])\), then the two notions of \(\int\) are not really related
\end{theorem}

Ex:
\(f(x) = \frac{\sin x}{x},  x \in [1, \infty]\)
\[\int_1^{\infty} \vert f(x) \vert dx = +\infty \Rightarrow f \not \in \mathcal{L}^1([1, +\infty])\].
But on the other hand
\[
    \int_1^{\infty} \frac{\sin x}{x} dx = \lim_{\omega \to \infty} \int_1^{\omega} \frac{\sin x}{x} dx = \frac{\pi}{2}
\]

\begin{proposition}
    \((X, \mathcal{M}, \mu)\) complete measure space. Let \(\{f_n\} \subseteq \mathcal{L}^1(X, \mathcal{M}, \mu)\). 
    
    Suppose that \(\sum_{n=1}^\infty \int_X |f_n| \, d\mu < \infty\)
    Then the series \(\sum_{n=1}^\infty f_n\) converges a.e. on \(X\), it is in \(\mathcal{L}^1(X)\) and 
    \[
        \int_X \left( \sum_{n=1}^\infty f_n  \right) \, d\mu = \sum_{n=1}^\infty \int_X f_n \, d\mu
    \]
\end{proposition}


\subsubsection*{Spaces of integrable functions}
\((X, \mathcal{M}, \mu)\) complete measure space.
\[
    \mathcal{L}^1 = \left\lbrace f: X \to \barreal : \mbox{ f is integrable}\right\rbrace
\]
\(\mathcal{L}^1\) is a vector space. On \(\mathcal{L}^1\) we can introduce \(d : \mathcal{L}^1 \times \mathcal{L}^1 \to [0, +\infty)\) defined by 
\[
    d_1 (f,g) =\int_{X} \vert f-g \vert 
\]

It is immediate to check that 
\[
    d_1 (f, g) = d_1(g, f) \tag*{(symmetry)}
\]  

\[
    d_1(f, g) \leq d_1(f, h) + d_1(h, g) \; \;\forall f, g, h \in \mathcal{L}^1(X) \tag*{(triangular inequality)}
\]  
However, \(d_1\) is not a distance on \(\mathcal{L}^1(X)\), since 
\[
    d_1(f,g) = 0 \Rightarrow f=g \quad \mbox{a.e on }X
\tag*{(pseudo-distance)}\]
To overcome this problem, we introduce an equivalent relation in \(\mathcal{L}^1(X)\): we say that 
\[
    f \sim g \Leftrightarrow f = g \quad \mbox{a.e. on }X
\]
If \(f \in \mathcal{L}^1(X)\), we can consider the equivalence class
\[
    [f] = \left\lbrace g \in \mathcal{L}^1(X) : g = f \mbox{ a.e on }X \right\rbrace
\]
We define
\[
    L^1(X) = \frac{\mathcal{L}^1(X)}{\sim} = \{[f]: f \in \mathcal{L}^1(X)\}
\]
\(L^1(X)\) is a vector space, and on \(L^1(X)\) the function \(d_1\) is a distance: 
\[
    d_1([f], [g]) = 0 \Leftrightarrow \int_X |[f]-[g]|\, d\mu =0 \Leftrightarrow [f]= [g] \text{ a.e. } \Leftrightarrow f=g \text{ a.e. }
\]
To simplify the notations, the elements of \(L^1(X)\) are called functions, and one writes \(f \in L^1(X)\). With this, we means that we choose a representative in \([f]\), and f denotes both the representative and the equivalence class. The representative can be arbitrarily modified on any set with \(0\) measure.

Another relevant space of measurable functions is the space of \textbf{essentially bounded} functions.
\begin{definition}
    \(f : X \to \overline{\mathbb{R}}\) measurable is called essentially bounded if \(\exists \; M > 0\) s.t.
    \[
        \mu(\left\lbrace x \in X : \vert f(x) \vert \geq M \right\rbrace) = 0
    \]
\end{definition}
Ex: 
\[f(x) = \begin{cases}
    1 & x > 0 \\
+\infty & x = 0 \\
0 & x < 0 \\
\end{cases}
\] 
For \(M > 1\), \(\lambda(\left\lbrace x \in \mathbb{R} : \vert f(x) \vert > M\right\rbrace) = \lambda(\left\lbrace 0 \right\rbrace) = 0 \Rightarrow f\mbox{ is essentially bounded}\).


If \(f\) is essentially bounded, it is well defined the \textbf{essential supremum} of \(f\).
\[
    \underset{X}{\esssup} f := \inf \left\lbrace M > 0 \mbox{ s.t. } f \leq M \mbox{ a.e. on }X\right\rbrace = \inf \left\lbrace M > 0 \mbox{ s.t. } \mu(\{f \geq M \})=0 \right\rbrace
\]
It can also be defined an essential inf.
\begin{remark}
    Note that, by def of inf, \(\forall \; \epsilon > 0\) we have 
    \[
        f \leq (\underset{X}{\esssup} f) + \epsilon \qquad \text{a.e. on }X
    \]
\end{remark}
We define 
\[
    L^{\infty} (X, \mathcal{M}, \mu) = \frac{\mathcal{L}^{\infty}(X, \mathcal{M}, \mu)}{\sim}
\]
\(L^{\infty}(X)\) is a vector space, and it is also a metric space for \(d_{\infty}(f,g) = \underset{X}{\esssup} \vert f-g \vert\)
\subsubsection*{Relation between different types of convergence}
\(\left\lbrace f_n \right\rbrace\) sequence of measurable functions \(X \to \barreal\)
\begin{itemize}
    \item \(f_n \to f\) pointwise (everywhere) on \(X\) if \(f_n(x) \overset{n \to \infty}{\to} f(x) \; \forall \; x \in X\)
    \item \(f_n \to f\) uniformly on \(X\) if \(\sup_{x \in X} \abs{f_n(x) - f(x)} \overset{n \to \infty}{\to} 0\)
    \item \(f_n \to f\) a.e. on \(X\) if 
    \[
        \begin{array}{c}
            \mu\left(\left\{ x \in X : \lim_n f_n(x) \neq f(x) \mbox{ or does not exist} \right\}\right) = 0 \\
            \Updownarrow \\
            f_n(x) \to f(x) \mbox{ for a.e } x \in X
        \end{array}
    \]
    \item \underline{Convergence in \(L^1(X)\)}: \(f_n \to f\) in \(L^1(X)\) if 
    \[
        \int_X \stackbelow{\abs{f_n - f}}{d_1(f_n, f)} \, d\mu \overset{n\to \infty}{\to} 0
    \]
    \item \underline{Convergence in measure/probability}: \(f_n \to f\) in measure if \(\forall \, \alpha 0\)
    \[
        \lim_{n\to \infty} \mu\left(\left\{ \abs{f_n - f} \geq \alpha \right\}\right) = 0
    \]
\end{itemize}
\noindent\underline{Basic facts}: uniformly convergence \(\underset{\displaystyle\nLeftarrow}{\Rightarrow}\) pointwise \(\underset{\displaystyle\nLeftarrow}{\Rightarrow}\) a.e. convergence.

\noindent\underline{Ex:} \(f_n (x) = \exp{-nx}, x \in [0,1]\)
\[
    f(x) = 0, \quad g(x) = \begin{cases}
        0 & x \in (0, 1]\\ 1 & x = 0
    \end{cases}
\]
Then \(f_n \to g\) pointwise, \(g = f\) a.e. \(\Rightarrow f_n \to f\) a.e. on \([0,1]\). But \(f(0) \neq g(0) \Rightarrow f_n \to f\) pointwise. 

\(f_n \nrightarrow g\) uniformly on \([0,1]\) \(\bigg\lvert \begin{array}{l}
    f_n \in \mathcal{C}([0,1]) \\ f_n \to g \Rightarrow g \in \mathcal{C}([0,1])
\end{array}\)

a.e. \(\nRightarrow\) uniform, but not all is lost...
\begin{theorem}[Egorov]
    Let \(\mu(X) < +\infty\), and suppose that \(f_n \to f\) a.e. on \(X\). Then, \(\forall \; \epsilon > 0, \exists X_{\epsilon} \subset X\), measurable, s.t. 
    \[
        \mu(X \setminus X_{\epsilon}) < \epsilon
    \]
    and \(f_n \to f\) uniformly on \(X_{\epsilon}\)
\end{theorem}
\noindent\underline{Ex}: in an example \(f_n \to 0\) a.e., \(f_n \to 0\) uniformly on \([0,1]\), but \(f_n \to 0\) uniformly on \([\epsilon, 1]\).

Regarding a.e. convergence and in measure convergence there is the following theorem
\begin{theorem}
    If \(\mu(X) < +\infty\) and \(f_n \to f\) a.e. on \(X\) \(\Rightarrow f_n \to f\) is measure on \(X\)
\end{theorem}
\begin{proof}
    Let \(\alpha > 0\). We want to show that \(\forall \; \epsilon > 0\) \(\exists \; \bar{n} \in \mathbb{N}\) s.t. 
    \[
        n > \bar{n} \Rightarrow \mu(\left\lbrace \abs{f_n -f} \geq \alpha\right\rbrace) <\epsilon
    \]
    \(f_n \to f\) a.e. on \(X\), \(\mu(X) < +\infty\) \(\overset{\text{Egorov}}{\Rightarrow} \exists \; X_{\epsilon} \subseteq X\) s.t. \(\mu(X \setminus X_{\epsilon}) < \epsilon\) and \(f_n \to f\) uniformly on \(X_{\epsilon}\) \(\Leftrightarrow \sup_{X_{\epsilon}} \abs{f_n - f} \overset{n\to \infty}{\to} 0\).

    In particular, this means that \(\exists \; \bar{n} \in \mathbb{N}\) s.t. \(n > \bar{n} \Rightarrow \abs{f_n -f} < \alpha\) on \(X_{\epsilon}\).

    Therefore 
    \[
        \left\{ \abs{f_n -f} \geq \alpha \right\} \cap  X_{\epsilon} = \emptyset \Rightarrow \left\{ \abs{f_n -f} \geq \alpha \right\} \subseteq X \setminus X_{\epsilon} \qquad \text{for } n> \bar{n} 
    \]
    By monotonicity of \(\mu\), we deduce that
    \[
        \mu\left(\left\{ \abs{f_n -f} \geq \alpha \right\}\right) \leq \mu(X \setminus X_{\epsilon}) < \epsilon \quad \mbox{for }n> \bar{n}
    \]
    Namely, \(f_n \to f\) in measure.
\end{proof}
\begin{remark}
    \(\mu(X) < +\infty\) is essential
\end{remark}
For example, in \((\mathbb{R}, \mathcal{L}(\mathbb{R}), \lambda)\) consider
\[
    f_n (x) = \chi_{[n, n+1)}(x)
\]
\(f_n(x) \to 0\) for every \(x \in \mathbb{R}\). However, \(\lambda(\left\lbrace \vert f_n \vert \geq \frac{1}{2}\right\rbrace) = \lambda([n, n+1)) = 1\) not \(0\)
