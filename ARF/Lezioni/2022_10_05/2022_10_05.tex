\section{Lecture 05/10/2022}
\begin{theorem}[Monotone Convergence or Beppo Levi's theorem]
    \(f_n : X \to [0, +\infty]\) measurable. Suppose that 
    \begin{enumerate}
        \item \(f_n(x) \leq f_{n+1}(x)\) for a.e. \(x \in X\), for every \(n\)
        \item \(f_n \to f\) a.e. on \(X\) 
    \end{enumerate}
    Then 
    \[
        \int_X f \, d\mu = \lim_n \int_X f_n \, d\mu
    \]
\end{theorem}

\begin{corollary}[Monotone convergence for series]
    \(f_n : X \to [0, +\infty]\) measurable, then 
    \[
        \int_X \left( \sum_{n=0}^{\infty} f_n\right) \, d\mu = \sum_{n=0}^{\infty} \int_X f_n \, d\mu
    \]
\end{corollary}

\begin{theorem}[Approximation with simple functions]
    Given \((X, \mathcal{M})\) measure space, \(f: X \to [0, +\infty]\) measurable, then \(\exists\) a sequence \(\left\{ s_n \right\}\) of simple functions s.t. 
    \[
        0 \leq s_1 \leq \ldots \leq s_n \leq \ldots \leq f \qquad \text{pointwise } \forall \; x \in X
    \]
    and 
    \[
        s_n (x) \to f(x) \qquad \forall \; x \in X \text{as } n \to \infty 
    \]
    Moreover, if \(f\) is bounded, then \(s_n \to f\) uniformly on \(X\) as \(n \to \infty\).
\end{theorem}

\begin{remark}
    There is also
    \[
        \int_X f \, d\mu = \sup \left\{ \int_X s \, d\mu \, \bigg\vert \begin{array}{l}s\text{ is simple} \\ 0 \leq s \leq f \end{array}\right\}
    \]
\end{remark}

But let \(\left\{ s_n \right\}\) be the sequence given by the simple approximation theorem. By monotone convergence 
\[
    \int_X f \, d\mu = \lim_n \int_X s_n \, d\mu
\]
Ex: \(f, g : X \to [0, +\infty]\). Then 
\[
    \int_X (f+g) \, d\mu = \int_X f \, d\mu + \int_X g \, d\mu
\]

\begin{lemma}[Fatou's Lemma]
    Given \(f_n \to [0, +\infty]\) measurable \(\forall \, n\). Then 
    \[
        \int_X (\liminf_n f_n) \, d\mu \leq \liminf_n \int_X f_n \, d\mu
    \]
    In particular, if \(f_n \to f\) a.e. on \(X\), then
    \[
        \int_X f \, d\mu \leq \liminf_n \int_X f_n d\mu
    \]
\end{lemma}

\begin{proof}
    Given that \((\liminf_n f_n)(x) = \lim_n (\underbrace{\inf_{k \geq n} f_k(x)}_{= g_n (x)})\). Now, for every \(x \in X\), \(\left\{ g_n(x) \right\}\nearrow\)
    \[
        g_{n+1}(x) = \inf_{k \geq n+1} f_k(x) \geq \inf_{k \geq n} f_k(x) = g_n (x)
    \]
    Also, \(g_n \geq 0\) on \(X\). Thus, by monotone convergence
    \[
        \int_X \liminf_n f_n \, d\mu = \int_X \lim_n g_n \, d\mu = \lim_n \int_X g_n \, d\mu = \liminf \int_X g_n \, d\mu
    \]
    Now, note that \(g_n (x) = \inf_{k\geq n} f_k(x) \leq f_n(x) \leq \liminf_n \int_X f_n \, d\mu\) 
\end{proof}

\begin{theorem}[\(\sigma\)-additivity of \(\int\)]
    Given \((X, \mathcal{M}, \mu)\) measurable space, \(\oldphi : X \to [0, +\infty]\). Define \(\nu(E) = \int_E \oldphi \, d\mu\), with \(E \in \mathcal{M}\). 
    \(\nu : \mathcal{M} \to [0, +\infty]\) is a measure. Moreover, let \(f:X \to [0, +\infty]\) measurable
    \[
        \int_X f \, d\nu = \int_X f\oldphi \, d\nu \tag*{*}
    \]
\end{theorem}
\begin{proof}
    \noindent\underline{\(\nu\) is a measure}:  

    \(\nu(\emptyset) = 0\), since \(\mu(\emptyset) = 0\). 
    Now, let \(E = \bigcup_{n=1}^{\infty} E_k\), \(\left\{ E_k \right\}\) disjoint. Then 
    \[
        \nu(E) = \int_X \oldphi\chi_{E} \, d\mu = \int_X \oldphi\sum_n \chi_{E_n} \, d\mu \underset{\begin{array}{l} \text{\scriptsize{monot. conv.}} \\ 
            \text{\scriptsize{for }}\textstyle\sum\end{array}}{=}  \sum_n \int_X \oldphi \chi_{E_n} \, d\mu = \sum_n \int_X \oldphi \, d\mu = \sum_n \nu(E_n) 
    \]
    We have proven \(\sigma\) additivity, so \(\nu\) is a measure.

    \noindent\underline{(*) holds}:
    Let \(E \in \mathcal{M}\). Then
    \[
        \int_X \chi_E \, d\nu = \int_E 1 \, d\nu = \nu(E) = \int_E = \int_E \oldphi \, d\mu = \int_X \oldphi \chi_E \, d\mu
    \]
    This shows that \((*)\) holds for \(\chi_E\), \(\forall \; E\). Then it holds for simple functions. \\
    Let now f be any measurable function, positive. Then we can take \(\{s_n\}\) given by the simple approximation theorem
    \[
        \int_X f \, d\nu \overset{\text{monot}}{=} \lim_n \int_X s_n \, d\nu = \lim_n \int_X s_n \oldphi \, d\mu \overset{\text{monot}}{=} \int_X f \oldphi \, d\mu 
    \]
    which is \((*)\) 
\end{proof}

\begin{remark}
    \(X, \mathcal{M}, \mu\) complete measure space. Then, by the vanishing lemma, it is not difficult to deduce that 
    \[
        f=g \text{ a.e. on } X \Leftrightarrow \int_E d \, d\mu = \int_E g \, d\mu \qquad \forall\; E \in \mathcal{M}
    \]
    The \(\int\) does not see differences of sets with 0 measure. As a consequence, in all the theorems, it is sufficient to assume that the assumptions are satisfid a.e. 
\end{remark}


\subsection*{Integrals for real valued functions}
\(X, \mathcal{M}, \mu\) complete measure space. \\
\(f: X \to \barreal = [-\infty, \infty]\) measurable. Recall \(f= f^+ - f^- \) where \(f^+ = \max{\{f, 0\}}\), \(f^- = -\min{\{f, 0\}} \) and \(|f|= f^+ + f^-\). 
Note that both are positive and measurable. 

\begin{definition}
    we say that \(f:X \to \barreal\) measurable is integrable on \(X\) if 
    \[
        \int_X |f| \, d\mu < \infty
    \]
\end{definition}

If \(f\) is integrable, we define \(\int_X f \, d\mu = \int_X f^+ \, d\mu + \int_X f^- \, d\mu\) \\
The set of integrable functions is denoted by 
\[
    \mathcal{L}^1 (X, \mathcal{M}, \mu) := \{f:X \to \barreal \text{ integrable} \} 
\]
\[
    \mathcal{L}^1 (X, \mathcal{M}, \mu) 
    = \mathcal{L}^1 (X) 
    = \mathcal{L}^1 
\]

If \(E \in \mathcal{M}\), we define
\[
    \int_E f \, d\mu = \int_X f \chi_E \, d\mu
\]

\begin{remark}
    \(f \in \mathcal{L}^1(X) \Rightarrow \int_X f \, d\mu \in \real\). Indeed \(0 \leq f^\pm \leq |f|\)
    \[
        \Rightarrow 0 \leq \int_X f^+ \, d\mu ,\ \int_X f^- \, d\mu \leq \int_X |f| \, d\mu < \infty 
    \] 
    \[
        \Rightarrow \int_X f \, d\mu = \int_X f^+ \, d\mu - \int_X f^- \, d\mu \in \real
    \]
\end{remark}

\begin{proposition}
    \(f : X \to \barreal \) measurable. Then
    \begin{enumerate}
        \item \(f \in \mathcal{L}^1 \Leftrightarrow |f| \in \mathcal{L}^1 \Leftrightarrow \) both \(f^+, \ f^-\) \(\in \mathcal{L}^1\)
        \item \(f \in \mathcal{L}^1 \), then 
        \[
            \left| \int_X f \, d\mu \right| \leq \int_X |f| \, d\mu  \tag{triangle inequality}
        \]
    \end{enumerate}
\end{proposition}

\begin{proof}
    Of the second part.
    \[
        \left| \int_X f \, d\mu \right| = \left| \int_X f^+ \, d\mu + \int_X f^- \, d\mu\right| \leq \int_X f^+ \, d\mu + \int_X f^- \, d\mu = \int_X |f| \, d\mu  
    \]
\end{proof}

\begin{proposition}
    \(\mathcal{L}^1(X, \mathcal{M}, \mu)\) is a vector space, and \(f, \, g \in \mathcal{L}^1\), \(\alpha \in \real\)
    \[
        \Rightarrow \int_X \left(\alpha f + g \right) \, d\mu = \alpha \int_X f \, d\mu + \int_X g \, d\mu 
    \]  
    by linearity of the integrals.
\end{proposition}

Many results can be extended from non negative functions to general functions.

\begin{theorem}
    \((X, \mathcal{M}, \mu)\) complete measure space. \(f\), \(g \in \mathcal{L}^1\). Then
    \[
        f= g \text{ a.e. on } X \Leftrightarrow \int_X |f-g| \, d\mu =0 \Leftrightarrow \int_E f \, d\mu = \int_E g \, d\mu \qquad \forall \; E \in \mathcal{M} 
    \]
\end{theorem}
The most relevant theorem for convergence is the following
\begin{theorem}[Dominated convergence theorem]
    \(\{f_n\}\) sequence of measurable functions \(X \to \barreal\). Suppose that
    \begin{enumerate}
        \item \(f_n \to f \) a.e. on \(X\)
        \item \(\exists g : X \to \barreal \), \(g \in \mathcal{L}^1(X)\), such that \(|f_n(x) \leq g(x)|\) a.e. on \(X\) \(\forall \; n \in \mathbb{N}\)
    \end{enumerate}
    Then \(f \in \mathcal{L}^1\) and 
    \[
        \lim_n \int_X |f_n -f| \, d\mu = 0 
        \qquad \left( \Rightarrow \int_X f \, d\mu = \lim_n \int_X f_n \, d\mu \right)  
    \]
\end{theorem}
\begin{proof}
    Note that \(f_n \in \mathcal{L}^1\) \(\forall \; n\), since \(|f_n| \leq g\) and we have the monotonicity of \(\int\) for non negative functions
    \[
        |f_n(x)| \leq g(x) \quad
        n \to \infty \qquad
        |f(x)| \leq g(x) \text{  a.e. on } X 
    \]
    \[ 
        \Rightarrow f \in \mathcal{L}^1(X)
    \]  
    Now, consider \(\oldphi_n = 2g - |f_n - f|\). We have
    \[
        |f_n-f| \leq |f_n|+|f| \leq 2g \quad \text{ a.e. on }X \quad \oldphi_n \geq 0 \quad \text{ a.e. on }X  
    \]
    We can use Fatou's lemma:
    \[\begin{array}{l}
        \int_X (\underbrace{\liminf_n \oldphi_n}_{\stackbelowlittle{\mbox{= 2g a.e.}}{\int_X 2g \; d\mu}}) \; d\mu \leq \liminf_n \int_X \oldphi_n \, d\mu = \liminf_n \int_X (2g - \abs{f_n - f}) \, d\mu = \\
        = \int_X 2g \, d\mu + \liminf_n (-\int_X \abs{f_n - f} \, d\mu) =\int_X 2g \, d\mu - \limsup_n \int_X \abs{f_n - f} \, d\mu
    \end{array}
    \]
    Subtracting \(\int_X 2g \, d\mu\) from both sides 
    \[
        0 \leq -\limsup_n \int_X \abs{f_n - f} \, d\mu \Rightarrow 0 \leq \liminf_n \int_X \abs{f_n - f} \, d\mu \leq \limsup_n \int_X \abs{f_n - f} \, d\mu \leq 0 
    \]  
\end{proof}
\begin{remark}
    If \(\mu(X) < +\infty\), and \(\exists M > 0\) s.t. \(\abs{f_n} \leq M\) a.e. on \(X, \forall \; n\), then we can take \(g = M\) as dominating function.
\end{remark}

\noindent\underline{Comments on the relation between Riemann and Lebesgue integrals}

Let \(f : I \subset \real \to \real\), \(I\) interval, be bounded. Assume also that \(I\) is closed and bounded.
\begin{theorem}
    Let \(f\) be Riemann-integrable on \(I \ (f \in R(I))\). Then 
    \[
        f\in \mathcal{L}^1(I, \mathcal{L}(I), \lambda)
    \]
    and 
    \[
        \int_I f \, d\lambda = \int_I f(x) \, dx
    \]
\end{theorem}
\begin{theorem}
    \(f \in R(I) \Leftrightarrow f\) is continuous on \(x\), for a.e. \(x \in I\).
\end{theorem}
\noindent\underline{Ex}: \(\chi_{\mathbb{Q}}\) on \([0,1]\) is not Riemann integrable, because it is discontinuous at any point. Note that, instead, \(\chi_{\mathbb{Q}} = 0\) a.e. on \([0,1]\) \(\Rightarrow \int_{[0,1]} \chi_{\mathbb{Q}} \, d\lambda = 0\)