\section{Lecture 29/09/2022}
\begin{remark}
    On the relation between \((\real, \boreal, \lambda)\) and  \((\real, \mathcal{L}(\real), \lambda)\) \qquad (\(\lambda =\) Lebesgue measure)

    \((\real, \boreal, \lambda)\) is not complete. In fact, \((\real, \mathcal{L}(\real), \lambda)\) is the completion of \((\real, \boreal, \lambda)\).

    Note that, \(\forall \; E \in \mathcal{L}(\real) \; \exists \, \mbox{ a } G_{\delta}-\mbox{set } A\) and an \(F_{\delta}-\mbox{set } B\) s.t.
    \[
        \begin{array}{l}
            A \supset E \mbox{ and } \lambda(A \setminus E) = 0 \\
            B \subset E \mbox{ and } \lambda(E \setminus B) = 0
        \end{array}
    \]
\end{remark}
\((X, \mathcal{M}, \mu)\) complete measure space. 
\begin{definition}
    Let \(P(x)\) be a proposition depending on \(x \in X\). We say that \(P(x)\) is true \((\mu-)\) almost everywhere if 
\[
    \mu\left(\left\{ x \in X : P(x) \mbox{ is false}\right\}\right) = 0
\]
\(P(x)\) is true \(\underset{(\mu-\text{a.e.})}{\mbox{a.e.}}\) on \(X\).    
\end{definition}

\noindent\underline{Ex}: \((\real, \mathcal{L}(\real), \lambda)\), \(f(x) = x^2\).  
Then \(f(x) > 0\) a.e. on \(\real\) (for a.e. \(x\)):
\[
    \left\{ f(x) \leq 0 \right\} = \left\{ 0 \right\}, \mbox{ and } \lambda(\left\{ 0 \right\}) = 0
\]
\((\real, \mathcal{P}(\real), \mu_C)\) with \(\mu_C\) counting measure. Then it is not true that \(f(x) > 0\) \(\mu_C\)-a.e. 
\[
    \mu_C \left(\left\{ 0 \right\}\right) = 1
\]
It will be useful to consider sequences converging a.e.: 
\[
    f_n \to f \qquad \mbox{a.e. on }X
\]
if \(\mu\left( \left\{ x \in X : \lim_n f_n(x) \neq f(x), \mbox{ or does not exist} \right\}\right) = 0\)

\begin{proposition}
    \((X, \mathcal{M}, \mu)\) complete measure space. 
    \begin{enumerate}
        \item \(f: X \to \real\) is measurable, and \(g = f \) a.e. on \(X\), then \(g\) is measurable
        \item \(f_n \to f\) a.e. on \(X\), \(f_n : X \to \real\) measurable for all \(n\), then \(f\) is measurable
    \end{enumerate}
\end{proposition}

\subsubsection*{Integration of non-negative functions}
\noindent\underline{Notation}: \[
    \begin{array}{c}
        \left\{ x \in X : f(x) \geq 0 \right\} = \left\{ f \geq 0 \right\} \\
        \left\{ x \in X : f(x) > 0 \right\} = \left\{ f > 0 \right\}   \\
        \vdots
    \end{array}
    \]
\((X, \mathcal{M}, \mu)\) complete measure space.
We consider measurable functions \(f: X \to [0, +\infty]\)

\noindent\underline{Convention}: we define 
\[
    \begin{array}{l}
        a + \infty = +\infty \quad \forall \; a \in \real \\
        a \cdot (+\infty) = \begin{cases}
            +\infty & \mbox{if } a \neq 0, a > 0 \\
            0 & \mbox{if } a = 0
        \end{cases}        
    \end{array}
\]
With this convention, \(+ \) and \( \cdot\) of measurable functions are measurable functions.
\begin{definition}
    Let \(s: X \to [0, +\infty]\) be a measurable simple function, 
    \[
        s(x) = \sum_{n=1}^m a_n \chi_{D_n}(\bar{x})
    \]
    where \(D_1,\ldots,D_m\) are measurable, disjoint, and \(\bigcup_{n=1}^m D_n = X\). Let also \(E \in \mathcal{M}\). Then we define 
    \[
        \int_E s \, d\mu := \sum_{n=1}^m a_n \mu(D_n \cap E)
    \]
\end{definition}
\begin{remark}
    Given a simple function \(s\):
    \[s:[a,b] \to \real, \lambda = \mu \Rightarrow \int_E s \, d\mu \mbox{ is the area under the curve}\]
\end{remark}
\begin{remark}
    There are several points:
    \begin{itemize}
        \item In the definition we have already used the convention \(\mu(D_n \cap E = +\infty) \quad \mbox{ for some }n\)
        \item \(E \in \mathcal{M} \Rightarrow \chi_E\) is a simple function
        \[
            \chi_E(x) = 1 \cdot \chi_E + 0 \cdot \chi_{X\setminus E}(x)
        \] 
        In this case 
        \[
            \int_X \chi_E \, d\mu = 1\cdot \mu(E) + 0 \cdot \mu(X\setminus E) = \mu(E)
        \]
        \item \(s\chi_E = \sum_{n=1}^m a_n\chi_{D_n \cap E} \Rightarrow \int_E s\, d\mu = \int_X s\chi_E \, d\mu\)
    \end{itemize}
\end{remark}
\begin{definition}
    \(f:X \to [0, +\infty]\) measurable, \(E \in \mathcal{M}\). The \textbf{Lebesgue integral} of \(f\) on \(E\), with respect to (w.r.t.) \(\mu\), is 
    \[
        \int_E f \, d\mu = \sup \left\{ \int_E s \, d\mu \; \bigg\lvert \begin{array}{l}s\text{ is simple} \\ 0 \leq s \leq f \end{array}\right\}
    \]
\end{definition}

\begin{enumerate}
    \item If \(f \) is simple, the definitions are consistent
    \item Also for \(f\) measurable: \( \int_E f \, d\mu = \int_X f \chi_E \, d\mu\)
    \item \( \left( \mathbb{N}, \mathcal{\mathbb{N}}, \mu_C \right)\). \(f: \mathbb{N} \to \mathbb{R}\) is a sequence \( \left\{ a_n \right\}_{n \in \mathbb{N}}\) \[ \int_\mathbb{N} \{a_n\} \, d\mu_C = \sum_{n=0}^\infty a_n\]
\end{enumerate}

Basic Properties. \\
Let \(f, g : X \to \left[0, \infty\right]\) measurable. \(E, F \in \mathcal{M}, \ \alpha \geq 0\). Then: 
\begin{enumerate}
    \item \(\mu(E)=0 \Rightarrow \int_E f \, d\mu = 0\)
    \item \(f \leq g \) on \(E \Rightarrow \int_E f \, d\mu \leq \int_E g \, d\mu \)
    \item \(E \subset F \Rightarrow \int_E f \, d\mu \leq \int_F f \, d\mu\)
    \item \(\alpha \geq 0 \Rightarrow \int_E \alpha f \, d\mu = \alpha \int_E d \, d\mu\)
\end{enumerate}

\begin{remark}
    \(\left(\left[0, 1\right], \mathcal{L}(\left[0, 1\right]), \lambda  \right)\) \\
    Consider \(\chi_\mathbb{Q}\), it is the Dirichlet function on \(\left[0, 1\right]\). This is not Riemann integrable. \\ 
    However, \(\int_{\left[0,1\right]} \chi_{\mathbb{Q}} \, d\lambda = \lambda \left( \mathbb{Q} \cap \left[0,1\right] \right) =0 \)
\end{remark}

\begin{theorem}[Chebychev's inequality]
    \(f: X \to \left[0, \infty \right]\) measurable, \(c > 0\). Then \[ \mu\left(\{f \geq c \}\right) \leq \frac{1}{c} \int{\{f \geq c \}} f \, d\mu \leq \frac{1}{c} \int_X f \, d\mu \]
\end{theorem}
\begin{proof}
    \[ \int_X f \, d\mu \overset{X \supset \{f \geq c\}}{\geq} \int_{\{f \geq c \}} f \, d\mu \geq \int_{\{f \geq c\}} c \, d\mu 
    = c \int_{\{f \geq c\}} \, d\mu 
    = c \mu \left(\{f \geq c\}\right) \]
\end{proof}

\begin{theorem}
    \(s : X \to \left[0, \infty\right]\) simple. Define \(\phi : \mathcal{M} \to \left[0, \infty\right] \\ \phi(E) = \int_E s \, d\mu \\ \Rightarrow \phi \) is a measure. 
\end{theorem}

\begin{proof}
    \(\mu(\emptyset) =0 \Rightarrow \phi(\emptyset)=0 \) by definition. 
    \begin{definition}[sigma additivity]
        \(\{E_n \subset \mathcal{M}\}\) disjoint, and let \(E = \bigcup_{n=1}^\infty E_n \Rightarrow s = \sum_{k=1}^m a_k \chi_{D_k} \; D_k \in \mathcal{M}
        \)
    \end{definition}
    Then, by definition and since \(\mu\) is a measure and \(E \cap D_k = \bigcup_n (E_n \cap D_k)  \) 
    \[
        \phi(E) = \sum_{k=1}^m a_k \mu(D_k \cap E) = 
        \sum_{k=1}^\infty a_k \sum_{n=1}^\infty \mu(E_n \cap D_k)= 
    \]
    \[    
        \sum_{n=1}^\infty \left( \sum_{k=1}^m a_k \mu (E_n \cap D_k) \right) = 
        \sum_{n=1}^\infty \int_{E_n} s \, d\mu = 
        \sum_{n=1}^\infty \phi(E_n)
    \]
\end{proof}

\begin{theorem}[Vanishing Lemma]
    \(f: X \to \left[0, \infty\right]\) measurable. \(E \subset X \) measurable 
    \[\int_E f \, d\mu =0 \Leftrightarrow f=0 \text{ a.e. on } E \]
\end{theorem}
\begin{proof}
    \( \Leftarrow \) easy \\
    \( \Rightarrow \) Consider \( E \cap \{f >0\} = \bigcup_{n=1}^\infty \underbrace{\left(E \cap \{ f \geq \frac{1}{n} \} \right)}_{=:E_n} \) 
    
    Then \(\{E_n\}\) is an increasing sequence. By Chebyshev 
    \[
        \mu (E_n) \leq \frac{1}{\frac{1}{n}} \int_E f \, d\mu =0 \quad \forall \; n \Rightarrow \mu(E_n)=0 \quad \forall \; n 
    \]
    \(\mu(E \cup \{f>0\}) \overset{\text{continuity}}{=} \lim_n \mu (E_n)=0\), namely \(f=0\) a.e. on \(E\)
\end{proof}

The \(\int\) does not see sets with 0 measure.

\begin{definition}
    If \( f:X \to \left[0, \infty\right] \) is measurable, and \( \int_X f \, d\mu < \infty \) then we say that \(f\) is integrable.
\end{definition}

\begin{theorem}[Monotone Convergence - Beppo Levi]
    \(f_n:X\to \left[0, \infty\right]\) measurable. Suppose that 
    \begin{itemize}
        \item \(f_n(x) \leq f_{n+1}(x)\) for a.e. \(x \in X\) for every \(n\)
        \item \(f_n \to f \) a.e. on \(X\)
    \end{itemize} 
    Then \[ \int_X f \, d\mu = \lim_n \int_X f_n \, d\mu\]
\end{theorem}
\begin{proof}
    Part 1. \\
    Assume that the two hypotesis hold everywhere. First, if \(f\) is measurable 
    \[
        \int_X f_n \, d\mu \nearrow \quad \Rightarrow \exists \; \alpha = \lim_n \int_X f_n \, d\mu
    \]
    
    Also, \(f_n \leq f \) everywhere \(\Rightarrow \int_X f_n \, d\mu \leq \int_X f \, d\mu \quad \forall \; n\) 
    \[
        \Rightarrow \alpha \leq \int_X f \, d\mu 
    \]
    We want to show that also \(\geq \) is true. Let \(s\) be a simple function s.t. \(0 \leq s \leq f\) and \(c \in \left(0,1\right)\)
    Let \(E_n = \{f_n \geq cs\} \in \mathcal{M}\)
    \begin{itemize}
        \item \(E_n \subset E_{n+1} \; \forall \; n:\) 
        \\ if \(x \in E_n, \) then \(f_n(x) \geq cs(x) \Rightarrow f_{n+1}(x) \geq cs(x)\) \\ \(\Rightarrow f_{n+1}(x) \geq f_n(x) \geq cs(x) \Rightarrow x \in E_{n+1}\)
        \item Moreover, \(X = \bigcup_{n=1}^\infty E_n\). Indeed: 
        \\ - if \(f(x)=0\), then \(s(x)=0 \Rightarrow f_1(x)=0 = cs(x), \; x \in E_1\) 
        \\ - if \(f(x)>0\), then \(cs(x) < f(x)=\lim_n f_n(x)\) since \(s \leq f \) and \(c <1\) 
        \\ \(\Rightarrow cs(x) < f_n(x)\) for \(n \) sufficiently large, namely \(x \in E_n \) for \(n \) sufficiently large. 
    \end{itemize} 
    Therefore, 
    \[
        \alpha \geq \int_X f_n \, d\mu \geq \int_{E_n} f_n \, d\mu \geq c \int_{E_n} s \, d\mu = c \phi(E_n)
    \]
    \(\forall \; n, \ \forall \; 0 \leq s \leq f, \forall \; c \in \left[0, 1\right]\quad \phi(E_n) = \int_{E_n} s \, d\mu\). 
    \(\phi\) is a measure, and \(\{E_n\} \nearrow\) \\
    Therefore, taking the lim when \(n \to \infty\) by continuity 
    \[
        \alpha \geq \lim_n c \int_{E_n} s \, d\mu = c \int_X s \, d\mu \; \quad \forall c \in \left[0, 1\right]
    \]
    Take the limit when \(c \to 1^-: \ \alpha \geq \int_X s \, d\mu  \quad \forall \; 0 \leq s \leq f \) \\
    Take the sup over s: \(\alpha \geq \int_X f \, d\mu \).
    We proved both inequalities, so the thesis holds. \\
    Part 2. \\
    Note that \(\{x \in X: \text{assumptions of the theorem do not hold}\}\) is a set of zero measure. Take \(F. \ X = E \cup F \) since we have the assumpion on \(E\) and \(\mu (F)=0\). \\ 
    Then, by the Vanishing Lemma, since \((f - f \chi_E)=0\) a.e. and \((f_n - f_n \chi_E)=0\) we have that 
    \[ 
        \int_X f \, d\mu = \int_E f \, d\mu = \lim_n \int_E f_n \, d\mu = \lim_n \int_X f_n \, d\mu 
    \]
\end{proof}